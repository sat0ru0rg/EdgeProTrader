# EdgeProTrader 引き継ぎパック v1.0

---

## 1. 概要と活用ルール

本ドキュメントは、EdgeProTraderプロジェクトにおけるフェーズ間の引き継ぎ・移行作業を円滑に行うための統合資料です。以下の3要素を一括収録しています：

* **スレッド引き継ぎルール**（設計未完時でも思想や制約を明示）
* **タスク発生〜スレッド起票時の3点セット出力**（タスクを整理した後の3点出力）
* **コードマッピング表**（設計要素と実装との対応一覧）

このドキュメントは、「設計 → 実装」または「実装 → 保守」などのタイミングで活用され、プロジェクトの整合性と再現性を確保することを目的とします。

> 💡テンプレートは設計段階の情報共有に、コードマップはMQL5移行や共通化設計の場面で参照します。

---

## 2. スレッド引き継ぎルール（記憶インポート時の標準構文）

以下は、ChatGPTなどのAI支援環境において、スレッドを再起動または分割した際に記憶を確実に引き継ぐための標準構文です。GPTとのやり取りを再現性高く維持するため、すべてのスレッド冒頭文においてこのテンプレートを使用してください。

---

### 🔖 スレッド起票テンプレート（最新版 v1.1）

```markdown
このスレッドは【◯◯】です。EdgeProTraderの正式タスクです。  
以下のドキュメントを参照し、この内容の実装／設計支援をお願いします。

- 使用ドキュメント一覧：
    - EPT_spec_v1.5
    - EPT_Class_v1.5
    - EPT_spec_MQL_Designs
- 要件まとめ：
    - ◯◯機能のエントリーロジックを設計する
    - 最大ポジション数は10、1ポジずつ成行
    - 難平・追撃は裁量で制御（制限なし）
```

---

## 3. タスク発生〜スレッド起票時の3点セット出力

GPTはタスクを整理した後、ユーザーから登録許可を得た場合、以下の3点セットを出力すること：

1. 【タスク登録フォーマット】（タスク管理表への登録用）
2. 【スレッド冒頭テンプレート】（スレッド起票用の最初の投稿文）
3. 【初回アクション提案】（GPTが最初に行うべき着手提案）

この3点セットは `EPT_operationalGuide.md` 第7章および `EPT_prompt_v4_fixed16.md` に準拠し、プロジェクト全体の一貫性を担保するために必須の運用とする。

※このルールにより、スレッド起票・記憶インポート・初動指示が一貫した流れで運用できる。

---

## 4. コード移行マッピング表（v1.0）

> 以下は `EPT_transition_CodeMap_v1.0.md` の内容です。

> 💡このマッピング表は主に「MQL4→MQL5移植」「共通ロジック化」「モジュール設計時の参照」に活用されます。

```markdown
# EPT コード移行対応マップ（MQL4 → MQL5）

## モジュール：Entry系

| 要素 | MQL4実装 | MQL5実装 | 差異・補足 |
|------|------------|------------|--------------|
| パネルUI | OBJ_RECT系 + LabelClick | CDialog + CButton | 完全非互換（View層分離） |
| エントリー処理 | OrderSend | CTrade.Buy/Sell | 条件分岐で共通化可能 |
| 建値移動 | OrderModify | CTrade.PositionModify | 条件分岐で共通化可能 |
| スプレッドチェック | Spread > 許容値 | SymbolInfoDouble(symbol, SYMBOL_SPREAD) | 同等判定可能 |
| 時間帯チェック | TimeHour(TimeCurrent) | TimeLocal / TimeGMT | 同等だがMQL5の方が柔軟 |
| ポジション存在確認 | OrderSelect + OrderType | PositionSelect(symbol) | 実装構造が異なる（モデル抽象化推奨） |

## モジュール：描画・UI

| 要素 | MQL4実装 | MQL5実装 | 差異・補足 |
|------|------------|------------|--------------|
| ボタンUI | OBJ_RECTANGLE_LABEL | CDialog + CButton | 完全非互換（分離実装） |
| ライン描画 | ObjectCreate(..., OBJ_TREND) | 同左 | 共通API使用可 |
| ラベル表示 | ObjectCreate(..., OBJ_LABEL) | 同左 | 共通API使用可 |

## モジュール：ロジック共通化

| クラス | 共通化方式 | 備考 |
|--------|--------------|------|
| CEntryExecutor | `#ifdef __MQL5__` 条件分岐 | v1.5で共通化済み |
| CBEExecutor | 同上 | BE移動処理に使用予定 |
| CRiskManager | 完全共通クラス | 補助関数に依存 |
| CEntryValidator | 完全共通クラス予定 | スプレッド・時間判定のみ |
| CPanelStateManager | 完全共通クラス予定 | 状態管理の中核 |
| CPositionModel | API抽象化必要 | Position ↔ Order 構造吸収要 |
```

---

## 5. 備考・更新履歴

* v1.0（2025/05/04）

  * 初版作成。`EPT_transition_Template.md` + `EPT_transition_CodeMap_v1.0.md` を統合。
  * ドキュメント形式を整理し、今後の移行資料として統一活用可能に構成。

> 💡今後はフェーズ単位での移行ごとに事例ファイル（例：`EPT_transition_F2Entry_v1.0.md`）を追加・リンク化予定。

---

## 6. テンプレート適用記録（横断対応表：3テンプレ構成）

| テンプレート名                   | 主な適用ドキュメント                                                                             | 備考                        |
| ------------------------- | -------------------------------------------------------------------------------------- | ------------------------- |
| `EPT_Project_template`    | `EPT_project_v2.0.md`, `EPT_roadMap_v1.0.md`, `EPT_transition_ProjectTemplate_v1.0.md` | 構想・構成・戦略の共通設計に使用          |
| `EPT_spec_template`       | `EPT_spec_v2.0.md`, `EPT_spec_MQL_Designs_v2.0.md`                                     | 機能仕様・構造設計の共通枠組みとして活用      |
| `EPT_guidelines_template` | `EPT_guidelines_v2.0.md`, `EPT_operationalGuide_v2.0.md`                               | 運用ルール・命名・コーディング規約などの整理に使用 |

---

> 本表はすべてのテンプレート管理の基盤とし、`EPT_template_index.md` への移行や展開にも活用可能です。
