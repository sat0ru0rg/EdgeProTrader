# EdgeProTrader 運用ルールガイドライン v2.0

---

## 第1章. ガイドの目的と適用範囲

このドキュメントは、EdgeProTraderプロジェクトにおけるスレッド運用・タスク管理・変更履歴記録・GPT出力支援に関する一連の**運用ルール**を体系的に整理したものです。

本ガイドラインは以下を目的とします：

* プロジェクト全体の運用一貫性と記録精度の向上
* GPT支援出力における**形式・構文・命名の標準化**
* 複数ドキュメント／スレッド間のトレーサビリティ確保

### 1.1 適用対象

* EdgeProTrader に属するすべてのタスク／スレッド／ドキュメント
* GPTによる出力補助、およびその転記運用全般
* タスク管理台帳（EPT\_taskTable）、履歴ファイル（EPT\_ChangeLog）を含む一連の記録体系

### 1.2 管理方針

* 本ガイドのバージョンは明示的に管理される（例：v2.0）
* バージョン更新は、内容の構造変更・章追加・命名変更など**実質的な整備が行われた場合に限る**
* 軽微な追記・表記修正は `EPT_ChangeLog.md` での追記により対応する

---

## 第2章. スレッド運用ルール

本章では、スレッド単位での作業管理を行うための命名・分類・起票ルールを定義します。

### 2.1 スレッドの原則

* 1スレッド = 1タスクの原則を厳守する
* スレッド名とタスク名は**完全一致**させること
* 各スレッドでは必ず「導入文テンプレ＋進行ステップ」を記載し、スレッド目的を明確化する

### 2.2 スレッド分類

| スレッド種別         | 説明                                |
| -------------- | --------------------------------- |
| 通常タスクスレッド      | 個別のタスク実行単位として立ち上げる標準スレッド          |
| タスク管理スレッド      | すべてのタスク登録・進行確認を集約する永続スレッド         |
| 運用ルール検討スレッド    | 本ガイドを含む運用ルールそのものの見直しを行う場          |
| 更新履歴管理スレッド     | `EPT_ChangeLog.md` の追記をまとめる専用スレッド |
| 工程別タスク洗い出しスレッド | 構想段階や工程ごとのアイデア出しを行う場              |
| リサーチスレッド       | 外部技術・手法の探索・議論を行う柔軟なスレッド           |

> 📌 スレッド種別は将来的に拡張可能。新種別を採用する場合は必ず本ガイドへ追記すること。

### 2.3 スレッド命名ルール

* 命名形式： `【<種別>】<タスク名>`（例：`【設計整理】TPロジック再設計`）
* スレッドタイトル、タスク登録表、履歴記録すべてで**同一名称を使用する**
* 誤記や表記ゆれがある場合、GPTは自律的に補正・補完を行うこと

### 2.4 スレッド導入文テンプレート（v2.0対応）

```markdown
このスレッドは【◯◯】です。EdgeProTraderの正式タスクです。

- 使用ファイル一覧：
    - EPT_spec_v1.5
    - EPT_Class_v1.5
    - EPT_operationalGuide.md
- 目的（背景）：
    - ◯◯に関する運用方針を明文化し、タスク実行と記録を統一する
- ゴール定義（完了条件）：
    - ◯◯の運用ルールが明文化され、関連ドキュメントへ反映可能な状態
- 進行ステップ（アジェンダ）：
    1. 対象範囲と現状運用の整理
    2. 方針案の提示・議論
    3. ドキュメント追記案の確定
    4. ChangeLog登録・完了
```

> ✅ 導入テンプレートによりGPT出力の安定性と記録性が向上する。

### 🆕 導入文マークと出典記載ルール（補足）

- スレッド冒頭には「🚧」マークを使用し、進行中スレッドであることを明示する（✅は完了済スレッドに使用）。
- これにより、スレッド一覧上で完了済スレッドと未完了スレッドが視覚的に区別しやすくなる。

#### ✅ 使用例：

```
🚧 このスレッドは【TP設計整理】です。EdgeProTraderの正式タスクです。
```

---

- また、スレッドが他スレッドからの派生タスクである場合など、出典元を明示したいケースでは、以下のような記述を**導入文の直下に任意で追加してよい（オプション記載）**。

#### 📝 出典スレッド記載の例：

```
※このスレッドは【構想整理：TP方式案レビュー】スレッドから派生したタスクです。
```

> この補足により、スレッド間の関連性を可視化し、複数スレッド運用時のトレーサビリティを向上できる。

---

## 第3章. タスク運用ルール

この章では、タスクの登録・表示・完了管理に関する標準的なルールを定義します。

### 3.1 ステータスと優先度の表記

| ステータス | 表記   | 意味            |
| ----- | ---- | ------------- |
| 未着手   | 🗒️未 | タスクが未開始の状態    |
| 進行中   | ➡️進  | 現在作業が進行している状態 |
| 停止中   | 🛑停  | 一時的に中断している状態  |
| 完了済   | ✅完   | タスクが完了報告済み状態  |

| 優先度 | 表記  | 意味           |
| --- | --- | ------------ |
| 高   | 🔴高 | 最優先で取り組むべき内容 |
| 中   | 🟡中 | 通常対応の優先度     |
| 低   | 🔵低 | 後回しでも問題ない内容  |

---

### 3.2 タスク登録ルール

* **スレッド名＝タスク名**の原則を厳守
* タスク名の先頭に【◯◯】を付けて**タスク種別を明示**
* GPTは登録時に**テンプレ形式で出力**し、「タスク管理スレッドにて登録をお願いします」と必ずリマインド

---

### 3.3 タスク登録テンプレート（GPT出力形式）

```markdown
| ステータス | 優先度 | タスク名（スレッド名） | 登録日 | 期限 | 概要 | 備考 |
|------------|--------|--------------------------|--------|------|------|------|
| 🗒️未       | 🔴高   | 【設計整理】TPロジック再設計 | 2025/05/08 | 2025/05/15 | TP設計方針の再検討と構成見直し | 出典：TP設計整理スレッド |
```

---

### 3.4 表示ルール（タイミング別）

| 状況     | 表示内容           |
| ------ | -------------- |
| 登録直後   | ✅完を除いたタスクのみ表示  |
| 完了報告直後 | 今回完了＋残タスクを同時表示 |
| 明示指示時  | 全タスク（完了含む）を表示  |

---

### 3.5 統一種別一覧（【◯◯】文言）

以下はタスク名・スレッド名で使用する統一種別です：

| 文言      | 説明                 |
| ------- | ------------------ |
| 企画検討    | 新機能・構想段階の検討        |
| 要件定義    | 機能条件や仕様要件の洗い出し     |
| 仕様変更    | 機能・振る舞いの変更、仕様修正    |
| 設計整理    | ドキュメント構成・記述の統一整理   |
| 実装対応    | コードレベルの作業全般        |
| テスト設計   | テスト設計、検証ルールの整理     |
| 統合作業    | 複数ファイル・構造の統合       |
| ガイド追記   | 各種ガイドラインへの追加       |
| プロンプト修正 | GPT挙動に関する指示・仕様修正   |
| 命名変更    | 識別子・関数名などの命名統一     |
| 構造変更    | セクションやファイル構造の再構成   |
| 移行対応    | MQLバージョン間対応などの移植作業 |
| リネーム    | 名前の軽微な変更           |
| 表記修正    | 誤記・表記ゆれなどの調整       |
| リサーチ    | 外部調査・アイデア探索・自由議論   |
| その他     | 上記に該当しない内容（備考必須）   |

---

### 起票時のルール補足（第3章：スレッド運用ルールの補足項）

すべての新規スレッドを起票する際は、必ず `EPT_prompt_v5.0.md` を参照し、定義されたテンプレート・命名・出力ルールに準拠してください。

以下は目的別に参照すべき章の対応一覧です：

| 起票目的             | 参照章                | 内容                                       |
|----------------------|-----------------------|--------------------------------------------|
| タスク実行スレッド      | 第3章＋第4章           | 導入文・目的・ゴール・進行ステップ構文の準拠            |
| 運用ルール整理スレッド   | 第3章＋第5章           | ChangeLog出力と記録テンプレ形式の厳守                |
| スレッド命名・分類判断   | 第8章                | スレッド名＝タスク名の原則、および種別（【◯◯】）の付与準拠  |

> 📌 GPT支援による出力安定性と履歴の一貫性を保つため、このプロンプト参照は**義務化**されます。
> GPTがテンプレを出力する際もこの構成に基づいて判断・補完されます。

---

## 第4章. ChangeLog運用ルール

### 4.1 運用基本方針

* `EPT_ChangeLog.md` は**追記専用**で、削除・上書きは不可
* ドキュメントの**構造変更・章追加・仕様明文化**などが発生した場合、必ず記録を残す
* 軽微な表記修正のみであれば履歴省略も許容される（判断は状況次第）

---

### 4.2 記録形式（標準テンプレート）

```markdown
| No | 日付 | ドキュメント名 | バージョン | 種別 | 内容 | 出典スレッド |
|----|------|----------------|------------|------|------|--------------|
| XX | 2025/05/08 | EPT_operationalGuide.md | v2.0 | 章構造整理 | 第3章・第4章の再編成とタスク・履歴ルールの正式化 | guideテンプレート策定 |
```

> `No` は手動採番。`XX` のまま出力される。

---

### 4.3 GPTの支援ルール

* ドキュメント修正時、GPTは**必ず履歴追記を促す**
* 追記後は「追記しました」と**明示報告する**
* 修正箇所には\*\*行番号（L◯〜L◯）\*\*を添えること

---

### 4.4 表形式テンプレの簡略出力ルール【追加】

- GPTがChangeLog追記テンプレートを出力する際は、表の見出し行（列名）および罫線行は省略し、内容行（`| XX | ... |`）のみを提示する。
- これはコピペの効率を高めるための措置であり、表構造を理解しているユーザーを前提とする。
- 運用上、項目順序と列構成は不変であるため、簡略出力と整合性に問題は生じない。

---

## 第5章. GPT補助動作ルール

本章では、GPTによる支援出力に関する統一ルールを定義します。
これは、GPTが出力するテンプレート・案・補助文の**一貫性と精度を保つこと**を目的とします。

### 5.1 出力対象と種類

GPTが自律的に出力すべきテンプレートや案は以下のとおり：

| 出力対象        | 使用目的                | 形式              |
| ----------- | ------------------- | --------------- |
| タスク登録テンプレ   | タスク登録時の一覧表形式テンプレート  | Markdown表       |
| スレッド導入文     | スレッド起票時の定型構文        | Markdownコードブロック |
| ChangeLog追記 | ドキュメント修正時の履歴行出力     | Markdown表       |
| ステータス更新報告   | 完了時に必要な未完＋完了タスク一覧表示 | Markdown表       |
| 補足説明・構文例    | 特定章で用いる構文例、注釈       | インライン or ブロック   |

### 5.2 出力ルール（共通）

* 各テンプレートは**コピペ可能な完成形**で提示する
* 項目の順序は常に固定する（列順・構成順を変えない）
* 空欄がある場合も**空項目を保持したまま出力**する（省略不可）
* 日付やバージョンは原則その時点の正確な値を記載する
* 出典スレッド名は**必ず明記**し、タスク名と一致する構成とする

> ✅ 空欄保持の理由：テンプレをNotionや他ツールに貼り付けても構造が崩れないようにするため

---

### 5.3 簡略テンプレ出力ルール（タスク・履歴共通）

- GPTがタスク登録テンプレートまたはChangeLog追記テンプレートを出力する際は、項目列（No, ステータス 等）および罫線行を省略し、内容行のみを出力する。
- これはコピー＆ペーストの作業効率を向上させるための標準ルールとして採用される。
- すべてのテンプレ出力においてこのルールを適用し、今後の一貫性ある支援出力とする。

---

## 第6章. 今後の拡張方針

この章では、現行運用には含まれないが、将来的な拡張が予定されている方針をまとめます。

### 6.1 外部ツール連携

* 現在はMarkdown運用が中心だが、今後は以下への移行が検討されている：

  * Notion連携（タスク／履歴／構造管理）
  * Pythonスクリプトによる履歴登録自動化
  * GUIベースの操作によるタスク登録・ステータス変更

### 6.2 GPT人格のプロジェクト分離

* EPT以外のプロジェクト支援に対応するため、GPTの人格（ロール）を分離可能な構造に拡張予定
* その際、以下のようにプロンプト設計をモジュール化する：

  * 共通運用ルール群（第1〜4章）
  * EPT特化ルール群（第5〜6章）
  * 他プロジェクト用テンプレ群（プロンプト切替構造）

### 6.3 テンプレート種別の追加と柔軟化

* 現在のテンプレ出力は単一構文だが、今後以下のような柔軟化を予定：

  * 種別別テンプレ分岐（guide／spec／designなど）
  * ドキュメント種別ごとのフォーマット例自動提示
  * 非技術職向けテンプレートの簡略化形式

> 📌 この章の内容は構想段階にあるため、現行運用への影響はありません。

---

## 第7章. テンプレート運用ルール【新設】

### 7.1 ZIP単位でのテンプレート配布

EdgeProTraderプロジェクトでは、各種設計テンプレート（構想・仕様・ガイドライン）を以下の方針で管理・配布する：

- 設計テンプレートは `.md` 単体ではなく、**ZIP形式に統合して配布**する
- ZIPファイル名は `EPT_templates_v1.0.zip` とし、バージョン管理を行う
- ZIPには、次の3種のテンプレートを含む：
  - `EPT_Project_template_v1.0.md`
  - `EPT_spec_template_v1.0.md`
  - `EPT_guidelines_Template.md`
- **READMEファイルを同梱し、目的と使い方を明記する**
- ドキュメント参照・運用時には、ZIP単位での取り扱いを基本とする

> 🔖 本ルールは2025/05/09のスレッド【テンプレートZIP統合】で決定された

---

## 第8章. ドキュメントGit管理ルール【既設】

### 8.1 管理対象と基本方針

- Git管理対象となるのは、すべての `.md` 形式による仕様書・設計書・ガイド類（例：`EPT_spec_v2.0.md`）
- バイナリ形式（`.zip`, `.png`, `.xlsx` など）は原則として `.gitignore` にて除外する
- ドキュメントは `/docs/` フォルダに集約し、Git上でバージョン管理を行う

### 8.2 ファイルの追加とコミット規則

- ファイル追加時は `git add docs/ファイル名.md` で明示的にステージ
- コミットメッセージは `[docs] Add:` `[docs] Update:` `[docs] Fix:` を使用する
- 例：`[docs] Add: EPT_guidelines_v2.0.md を初期追加`

### 8.3 タグ運用ルール（ドキュメント専用）

- バージョンごとの状態を `v2.0_docs`, `v2.1_docs` などの **Gitタグで管理**
- タグは `git tag` → `git push origin タグ名` により手動で同期
- ドキュメントの世代管理と再現性のために明示的なタグ運用を行う

### 8.4 `.gitignore` 標準ルール

以下のような除外設定を推奨：

```
# ドキュメント除外ルール例
/docs/*.zip
/docs/templates/
/*.log
```

> 🔖 除外対象：テンプレZIP・画像・出力ログなど  
> ✅ 管理対象：すべての `.md` 設計ドキュメント

### 8.5 参考運用スレッド

このルールはスレッド【運用ルール】ドキュメントのGit管理導入（2025/05）にて導入された。

---

## 第9章. Git運用ルール（スレッド単位コミット）【新設】

### 9.1 スレッド単位コミットの原則

EdgeProTraderでは、**スレッド＝タスク単位でのGitコミット**を原則とする。  
このルールにより、以下の目的を達成する：

- スレッド・タスク・ChangeLog・Git履歴の**完全なトレーサビリティ**を実現
- 履歴単位でのレビュー／ロールバックが容易になる
- GPTによる支援出力（履歴テンプレ／Gitテンプレ）との一貫性を保持できる

---

### 9.2 コミットメッセージ構文

```text
<type>(<scope>): 【タスク種別】スレッド名 #スレッド名一致
```

- `<type>`：変更タイプ（例：`fix`, `feat`, `docs`, `refactor`）
- `<scope>`：対象モジュールやカテゴリ（例：`spec`, `prompt`, `trade`）

#### 例：

```bash
docs(guide): 【ガイド追記】タスク完了時の一連フロー標準化 #タスク完了時の一連フロー標準化
```

---

### 9.3 GPT補助出力ルールとの連携

- スレッド完了時、GPTは以下の3点セットを同時出力すること：

  1. ✅ ChangeLog追記テンプレート  
  2. ✅ Git操作テンプレート（add → commit → push）  
  3. ✅ タスク完了ステータス更新テンプレ（タスク表用）

> 本ルールは `EPT_prompt_v5.0.md` 第6章にて併記される。

---

### 9.4 運用補足と位置づけ

- 本章のルールは、設計ドキュメントやコードファイルを問わず **「作業単位＝スレッド単位」で一貫管理する原則** を補完する
- ドキュメントGit管理（第8章）とは役割が異なるため、**並列章として独立運用**とする

> 🔖 本ルールはスレッド【表記修正】タスク登録テンプレのXX列追加 から派生し、正式な運用知見として整理された。