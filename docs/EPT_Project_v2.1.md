# EdgeProTrader プロジェクト構想 v2.1（再構成版）

---

## 第1章. プロジェクト概要と目的

EdgeProTrader（以下、EPT）は、裁量トレーダーが行う日々のトレードにおいて、意思決定とその振り返りの質を高め、最終的にトレード技術の向上と継続的な自己成長を支援することを目的としたトータル支援エコシステムです。

現代のトレーダーは、多様な戦略や市場環境に対応しながら、瞬時の判断を求められる場面に日常的に直面しています。そこでEPTは、以下の4つのフェーズを中心に、それぞれに特化した機能を段階的に提供していきます。

* **計画（Planning）**：事前の戦略設計やリスクシナリオ構築
* **取引（Entry/Exit）**：エントリーと決済の実行支援、操作の簡便化
* **記録（Journal）**：取引の記録、メモ、スクリーンショットなどの統合管理
* **分析（Analytics）**：記録データに基づいた傾向分析と改善支援

これらのフェーズは独立して利用可能であると同時に、互いに連携して一貫した自己改善の流れを構成します。
EPTの最終目標は、単なるツールの提供にとどまらず、**トレーダー自身の思考の可視化・構造化を通じて「自らの戦略を深く理解し、再利用・進化できる」状態へ導くこと** にあります。

特に、GPTなどのAI技術との連携により、過去の戦略や判断履歴を活用した助言や予測のサポートを提供することで、
「裁量トレード × 自動化支援」の新たな形を実現していくことを長期的なビジョンとしています。

---

## 第2章. フェーズ構成と支援範囲

EdgeProTraderは、トレードにおける思考と行動を4つのフェーズに分解し、それぞれのフェーズでトレーダーを支援する設計思想を採用しています。これにより、従来は個別に分断されていた「戦略の立案 → エントリー・決済 → 記録 → 振り返り」のサイクルを、1つの流れとして統合的にサポートします。

| フェーズ           | 主な目的             | 代表的な支援機能例                     |
| -------------- | ---------------- | ----------------------------- |
| **Planning**   | エントリー前の戦略立案と可視化  | 戦略テンプレート、仮想エントリー、SL/TP配置、戦略メモ |
| **Entry/Exit** | 実際のトレード執行と状態管理   | パネルUI、ロット計算、建値移動、複数ポジション制御    |
| **Journal**    | トレードの記録とメモ・証拠保全  | スクショ保存、Notion投稿、自動ログ記録        |
| **Analytics**  | 過去トレードの分析と改善点の抽出 | 成績集計、傾向分析、AIによる要約と再提案（予定）     |

この4フェーズは以下の特徴を持ちます：

* **独立性**：それぞれの機能は単体でも使用可能であり、ユーザーの運用状況に応じて柔軟に選択できます。
* **連携性**：記録内容や戦略情報は後続フェーズと自動連携され、二重入力や記録漏れを防止します。
* **段階的開発**：まずはEntryフェーズから着手し、Planning → Journal → Analyticsの順で段階展開されます。

将来的には、AIとの連携によりこれらのフェーズを横断的に分析し、**トレーダー固有の戦略思考の可視化・進化**を支援する構想です。

---

## 第3章. 各フェーズの開発方針

### 3.1 計画フェーズ

計画フェーズは、トレードの成否を左右する最も重要な段階です。ここではトレーダーが自らの戦略意図を明確にし、チャート上に可視化することで、エントリー判断の精度と一貫性を高めることを目指します。

EPTでは、MQL5チャート上で以下の要素を直感的に操作・記録できるインターフェースを提供する予定です：

* 仮想エントリー位置（ライン）
* 想定SL/TPラインの描画
* 裁量判断に基づく「戦略ラベル」や「根拠メモ」の配置
* 戦略テンプレートの選択（例：押し目買い・ブレイクアウト等）

これにより、事前に立てた「計画」と実際の「エントリー」の乖離を後から検証可能になり、振り返り分析（Analytics）にも直結します。

また、Notionなど外部連携機能との組み合わせにより、戦略のスクリーンショットや説明文を一括で保存・投稿できる記録支援機能も段階的に導入予定です。

将来的には、こうした視覚情報をGPTが読み取り、「その戦略の意図」や「パターンの分類」などを補助的に提示することで、トレーダーの戦略理解と再利用性を高める知的サポートも構想しています。

### 3.2 取引フェーズ

取引フェーズは、実際にエントリーおよび決済を行う操作フェーズであり、最もストレスがかかるタイミングでもあります。EPTでは、このフェーズにおいてトレーダーの判断を正しく・迅速に実行に移せるよう、視認性・操作性・安全性を重視した取引支援ツールを提供します。

現行はMQL4をベースに、以下の機能を備えたシンプルな取引パネル（EntryPanel v1.4）を実装済または進行中です：

* 成行エントリー（BUY/SELL）
* BE（建値）ライン表示およびSL移動機能
* TP/SLのライン描画とラベル表示
* 複数ポジション管理（最大10まで想定）
* pips表示（赤・黄・緑の3色分岐）
* CloseAll・トグル系ボタン群の管理

これらの機能はすべて**チャート上での視覚操作を基本とし、UX重視の構成**をとっています。

将来的には、MQL5移行を前提に以下のような機能拡張・再構成を予定しています：

* CDialog + CButton による洗練されたUI
* EntryPanelのテンプレート切り替え（初期戦略ごとにUI構成を変更）
* PendingOrder（反発検知型）などの高度な発注モード
* 複数TP／分割決済／トレーリングSLなどの高度な決済設計
* AIによる状況判断補助（BEタイミング・TP変更提案など）

本フェーズは、今後もトレーダーの実践に最も直結するため、段階ごとにテストと改良を重ねつつ、常に「視認性」と「安全性」を両立した構造で発展していく予定です。

計画フェーズは、トレードの成否を左右する最も重要な段階です。ここではトレーダーが自らの戦略意図を明確にし、チャート上に可視化することで、エントリー判断の精度と一貫性を高めることを目指します。

EPTでは、MQL5チャート上で以下の要素を直感的に操作・記録できるインターフェースを提供する予定です：

* 仮想エントリー位置（ライン）
* 想定SL/TPラインの描画
* 裁量判断に基づく「戦略ラベル」や「根拠メモ」の配置
* 戦略テンプレートの選択（例：押し目買い・ブレイクアウト等）

これにより、事前に立てた「計画」と実際の「エントリー」の乖離を後から検証可能になり、振り返り分析（Analytics）にも直結します。

また、Notionなど外部連携機能との組み合わせにより、戦略のスクリーンショットや説明文を一括で保存・投稿できる記録支援機能も段階的に導入予定です。

将来的には、こうした視覚情報をGPTが読み取り、「その戦略の意図」や「パターンの分類」などを補助的に提示することで、トレーダーの戦略理解と再利用性を高める知的サポートも構想しています。

...

### 3.3 記録フェーズ

記録フェーズは、トレード結果を「資産として残す」ことを目的としたステージです。  
トレーダーがその場の感情や意図、判断理由などを後から振り返るには、単なる約定履歴だけでなく、**状況や根拠、戦略との一致度などを視覚的・言語的に記録すること**が極めて重要です。

EPTでは以下のような記録機能を段階的に提供していきます：

- エントリー・決済時のチャートスクリーンショット自動保存
- 保有中ポジションの状態・損益・pips等の自動記録
- トレード実行時に表示されたパネル上のボタン操作履歴
- 裁量判断や気づきのメモ記入（手動入力 or プロンプト選択）

また、Notion等の外部サービスと連携することで、記録データを一元的に保管・検索可能な形式で保存し、トレーダー個人の**裁量データベース化**を目指します。

さらに将来的には、こうした記録内容から「戦略の再現性」や「行動傾向」をAIが分析し、次のトレードに向けた提案を生成する「振り返り支援エージェント」の実現も視野に入れています。

### 3.4 分析フェーズ

分析フェーズは、記録された取引情報をもとに傾向や改善点を抽出し、次のトレードに活かすための「振り返りと学習」のステージです。EPTでは、単なる集計ではなく、**戦略の再現性や実行の一貫性に焦点をあてた分析支援**を提供していきます。

具体的には以下のような機能を段階的に実装予定です：

- 勝率、平均RR、通貨ペア別成績、時間帯別傾向などの集計
- 「計画どおりに実行できたか？」の一致率評価
- 取引分類（戦略タイプ別）ごとの結果比較
- チャート連携による振り返り用ビジュアル再生機能（Entry→Exit）

加えて、GPTやPythonなどと連携することで：

- 記録メモや戦略内容を要約・タグ分類
- 類似トレードの抽出とパフォーマンス比較
- 継続的な「癖の可視化」や「改善提案」の自動生成

など、**単なる過去分析にとどまらない「学習支援型分析ツール」**を志向しています。

将来的には、これらの分析結果をもとに戦略テンプレートやモード切替の自動提案など、「トレーダー自身が気づけない傾向に気づける」環境の構築を目指します。

---

## 第4章. 開発戦略と技術スタック

EPTは、MQL4による初期機能の安定化を皮切りに、段階的にMQL5ベースの高機能モジュールへと拡張・移行していく「フェーズ分割・段階統合型」の開発戦略を採用しています。

この戦略により、次の2つのバランスを実現します：

- 初期段階では動作実績のあるMQL4で高速開発と検証を行う
- 成熟フェーズではMQL5のUI・オブジェクト機能を活かし、UX・保守性・汎用性を強化

### 4.1 技術構成と役割分担

| 技術／環境 | 主な用途 | 備考 |
|------------|----------|------|
| **MQL4** | Entry機能の試作・UI最小構成 | 現行v1.4で使用中。MetaTrader4上で展開 |
| **MQL5** | Planning／Journal／Analyticsなど中核機能 | CDialog等による高度なUI設計に対応 |
| **Python** | スクリーンショット撮影、Notion連携、ログ処理 | 補助処理として活用。UIはMQL側と分離 |
| **Notion API** | 記録データの外部保存・統合 | データベース化と自動整理に活用予定 |
| **GPT API（将来）** | 戦略理解・提案・要約・類似戦略検索 | 学習型サポートエージェントの中核として導入構想 |

### 4.2 実装スタイルと開発思想

- **OOP原則（1クラス1責務）** に基づき、View／Logic／Tradeを明確に分離
- 共通化可能なモジュール（RiskManager, Validatorなど）は MQL4/5両対応で設計
- ViewはMQLごとに分離しつつ、インターフェース抽象で将来統合を目指す
- 条件分岐や拡張点（TP構成、発注モードなど）はテンプレート方式で吸収
- すべてのソース群／設計書はGitでバージョン管理・変更履歴を明示

EPTは単なるツール集合ではなく、**継続的に進化できる知的インフラ**として設計されています。そのための構造的・技術的基盤は、全フェーズを通じて一貫した思想のもと構築されます。

---

## 第5章. 中長期構想（Visionと進化方針）

EPTは、単なるトレード支援ツールではなく、トレーダーの「意思決定・行動・振り返り」のサイクル全体を長期的に支援する知的エコシステムを目指しています。そのために、段階的なフェーズ開発に加えて、次のような将来構想を掲げています：

### 5.1 AIとの連携強化

* **GPT系AIとの統合**：記録された戦略メモやトレード結果をもとに、要約・助言・類似戦略の提示を行う知的支援エージェントを構築
* **条件抽出と再利用支援**：トレーダーが言語化したルールを、AIが構造化しテンプレート化することで、過去の戦略を再利用しやすくする
* **癖の可視化とアラート提案**：判断傾向や負けパターンの検出を通じ、次回トレード時に注意点を提示する個別コーチング的な活用

### 5.2 自己学習・進化型の支援環境

* **トレーダー自身の行動データの学習活用**：過去の成功・失敗トレードから、個人に合った提案モデルを生成
* **戦略テンプレートのAI自動分類と進化**：蓄積された戦略群をGPTがクラスタリング・進化的に再構成する
* **振り返りの習慣化支援**：トレード終了後の記録・分析・提案までをワンパッケージ化した「トレーダーリズム支援UI」の構想

### 5.3 汎用化と他フェーズ展開

* Entry/Planningだけでなく、**Journal / Review / Backtest / Simulation**などへの機能展開
* クラス設計の再利用性を前提とし、すべてのフェーズに共通する構造思想を維持
* MQL5ベースの「統合パネルUI」開発による一元化インターフェースの実現

これらの構想により、EPTは「トレード支援」から「戦略思考支援」へ、さらに「自己成長支援」へと進化するプラットフォームとして発展していくことを目指しています。

---

## 第6章. 段階的開発ステップとマイルストーン

EdgeProTraderは、すべての機能を一度に構築するのではなく、トレーダーの実用性と検証性を重視し、段階的かつ実戦的な順序で機能開発を進めていきます。以下に、現在想定されているフェーズ進行と到達目標を示します。

### 6.1 フェーズ進行表（ロードマップ）

| ステージ | 主対象フェーズ | 主な内容 | 状態 |
|----------|----------------|----------|------|
| Phase 1 | Entry (MQL4) | EntryPanel v1.4、ロット計算、TP/BE/Close支援 | ✅ 実装中 |
| Phase 2 | Entry (MQL5) | MQL5 UI移植、CDialog構成、複数TP/Pending機能 | 🔄 構想中 |
| Phase 3 | Planning | チャート戦略記述、テンプレ選択、Notion記録連携 | 🕓 次ステップ |
| Phase 4 | Journal | スクリーンショット自動保存、ボタンログ記録、記述テンプレート化 | 🔲 未着手 |
| Phase 5 | Analytics | ログ集計、AI分析、戦略分類・改善提案の自動生成 | 🔲 未着手 |
| Phase 6 | AI統合拡張 | GPT連携による戦略要約・提案・条件抽出 | 🔲 展望中 |

### 6.2 実行方針

- 各ステージは必ず「小さく試し、使いながら育てる」構成とし、実戦投入を通じてUI・UXを磨く
- 機能同士の依存関係を最小限に抑え、「Entry単独運用 → Planning統合 → Journal記録 → Analytics活用」の段階展開を可能とする
- 技術的難易度よりも「ユーザー価値の即時性」「操作の直感性」を開発優先度の軸とする

この段階的展開により、EPTは常に「今、使える範囲から改善に結びつく」プロダクトであり続けることを目指します。

---

## 第7章. 運用原則と注意点

EdgeProTrader（EPT）は、長期的かつ再現性のある開発を実現するために、以下の運用原則を全体設計・実装・タスク管理にわたって明文化しています。

### 7.1 ドキュメントファースト方針

* すべての設計・仕様・運用は、Markdown形式のドキュメントとして明示管理する
* 議論・実装の前に「何を作るか／なぜ必要か」を構造的に整理し、他のフェーズとの整合性を担保

### 7.2 タスク＝スレッド運用の徹底

* すべての作業は「1スレッド＝1タスク」として分離し、導入文テンプレ＋ステップを必須とする
* タスク名・スレッド名・履歴記録の三者は完全一致させる（トレーサビリティ確保）

### 7.3 OOP＋責務分離設計

* コード実装では「1クラス1責務」「UIとロジックの分離」を徹底
* 共通関数は Common/CommonDefs.mqh に集約し、再利用性と保守性を高める

### 7.4 フェーズ単位の段階開発

* Entry → Planning → Journal → Analytics の順に段階拡張
* すべてのモジュールは単体でも利用可能な構造で設計（自己完結性）

### 7.5 ChangeLog＋バージョン管理

* すべての仕様変更は `EPT_ChangeLog.md` に記録し、構造単位での履歴追跡を可能にする
* ドキュメントにはバージョン明記（例：v2.0, v2.1）とし、Gitでのタグ管理を想定

これらの原則を全フェーズ・全タスクで一貫して適用することで、EPTは「構想→実装→改善→共有」の全工程において整合性のあるエコシステム構築を目指しています。

## 第8章. 付録・参照ドキュメント

EdgeProTraderの構想・設計・運用は複数のドキュメント群により構成されています。本章では、各文書の役割と活用ポイントを一覧として整理します。

### 8.1 関連ドキュメント一覧

| ドキュメント名                        | 主な内容・用途                      |
| ------------------------------ | ---------------------------- |
| `EPT_roadMap_v1.0.md`          | フェーズ進行の技術マッピングと進行ステップ        |
| `EPT_spec_v2.0.md`             | EntryPanelの仕様書（状態・UI・制御ロジック） |
| `EPT_Class_v2.0.md`            | クラスごとの責務・関数・依存関係一覧           |
| `EPT_spec_MQL_Designs_v2.0.md` | MQL4/5の対応戦略・モジュール構成定義        |
| `EPT_transitionPack.md`        | コード引き継ぎと設計テンプレートの橋渡し         |
| `EPT_prompt_v5.0.md`           | GPTによるタスク生成・出力ルールの標準仕様       |
| `EPT_operationalGuide_v2.0.md` | スレッド・タスク・履歴運用のガイドライン         |
| `EPT_guidelines_v2.0.md`       | コーディング＋プロジェクト運用ルールの統合版       |
| `EPT_ChangeLog.md`             | すべての設計書／構想文書の更新履歴            |

### 8.2 テンプレート構造

* `EPT_Project_template_v1.0.md`：本構想文書の骨格
* `EPT_spec_template_v1.0.md`：仕様設計ドキュメントの標準章構成
* `EPT_guidelines_Template.md`：運用ガイドライン文書の章構成雛形

### 8.3 保守・拡張に関する補足

* すべての設計・構想ファイルはGitでバージョン管理されており、ファイル名または内部に明記された `vX.X` を基準に更新履歴が記録されています。
* ドキュメント間の相互リンク・役割補完を前提として、構成的な変更が発生した際は必ず `EPT_ChangeLog.md` に追記されます。
